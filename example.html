<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PC status</title>
    <style>
         body { font-family: Arial; color: #ffffff; text-align: center; padding: 50px; background-color: #1e1e1e;  }
         #pcStatus { font-size: 1.5em; font-weight: bold; }
    </style>
</head>
<body>
<h1>PC Status</h1>
<div id="pcStatus">Loading...</div>

    <script>
        async function updateStatus() {
            try {
                const res = await fetch("status.json?_=" + Date.now());
                const data = await res.json();

             const lastUpdate = new Date(data.last_update);
             const onlineSince = new Date(data.online_since);
             const now = new Date();

                const diffMin = Math.floor((now - lastUpdate) / 60000);
                const onlineDiffMin = Math.floor((now - onlineSince) / 60000);

                const h = Math.floor(onlineDiffMin / 60);
                const m = onlineDiffMin % 60;

                let timeText = "";
                if (h > 0) timeText += `${h}h `;
                if (m > 0 || h === 0) timeText += `${m}min`;

                const statusEl = document.getElementById("pcStatus");

                if (diffMin < 1 && data.online) {
                    statusEl.textContent = `Online for ${timeText.trim()}`;
                } else {
                   statusEl.textContent = `Offline for ${timeText.trim()}`;
             }

         } catch (e) {
               document.getElementById("pcStatus").textContent = "Status error";
               console.error("Status fetch error:", e);
         }
        }

        updateStatus();
        setInterval(updateStatus, 30000); // update every 30s (like in our py script)
    </script>
</body>
</html>
